<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="" xmlns:th="www.thymeleaf.org"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Game Manager</title>

    <link rel="icon" href="/webroot/assets/media/image/logo.png">
    <link rel="stylesheet" href="/webroot/assets/css/cs-skin-elastic.css">
    <link rel="stylesheet" href="/webroot/assets/css/style.css">

    <!-- Plugin styles -->
    <link rel="stylesheet" href="/webroot/vendors/bundle.css" type="text/css">

    <!-- Prism -->
    <link rel="stylesheet" href="/webroot/vendors/prism/prism.css" type="text/css">

    <!-- App styles -->
    <link rel="stylesheet" href="/webroot/assets/css/app.min.css" type="text/css">
    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/html5shiv/3.7.3/html5shiv.min.js"></script> -->
    <link rel="stylesheet" href="/endors/clockpicker/bootstrap-clockpicker.min.css" type="text/css">
    <link rel="stylesheet" href="/webroot/vendors/datepicker/daterangepicker.css" type="text/css">

</head>
<body class="form-membership">

<!-- begin::preloader-->
<div class="preloader">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="50px" height="50px" viewBox="0 0 128 128"
         xml:space="preserve">
        <rect x="0" y="0" width="100%" height="100%" fill="#FFFFFF"/>
        <g>
            <path d="M75.4 126.63a11.43 11.43 0 0 1-2.1-22.65 40.9 40.9 0 0 0 30.5-30.6 11.4 11.4 0 1 1 22.27 4.87h.02a63.77 63.77 0 0 1-47.8 48.05v-.02a11.38 11.38 0 0 1-2.93.37z"
                  fill="#000000" fill-opacity="1"/>
            <animateTransform attributeName="transform" type="rotate" from="0 64 64" to="360 64 64"
                              dur="500ms" repeatCount="indefinite">
            </animateTransform>
        </g>
    </svg>
</div>
<!-- end::preloader -->
<!-- Left Panel -->
<aside class="navigation left-panel" style="height: 100%">

    <!-- begin::logo -->
    <div id="logo">

        <img class="logo" src="/webroot/assets/media/image/logo.png" alt="logo">
        <img class="logo-sm" src="/webroot/assets/media/image/logo-sm.png" alt="small logo">
        <img class="logo-dark" src="/webroot/assets/media/image/logo-dark.png" alt="dark logo">
    </div>
    <!-- end::logo -->

    <!-- begin::navigation header -->
    <header class="navigation-header">
        <div>
            <h5>Fotoable</h5>
            <p class="text-muted">Administrator</p>
            <ul class="nav">
                <li class="nav-item">
                    <a onclick="logout()" class="btn nav-link bg-danger-bright" title="Logout" data-toggle="tooltip">
                        <i data-feather="log-out"></i>
                    </a>
                </li>
            </ul>
        </div>
    </header>
    <!-- end::navigation header -->

    <!-- begin::navigation menu -->
    <div class="navigation-menu-body"  th:utext="${sidePanal}">

    </div>
    <!-- end::navigation menu -->

</aside>
<!-- Left Panel -->

<!-- Right Panel -->


<div id="right-panel" class="right-panel" style="width: 1500px;margin: 35px auto">

    <!-- Header-->
    <header id="header" class="header">
        <div class="top-left">
            <div class="row form-group" style="">
                <form id="serverSelect" class="form-horizontal" method="get">
                    <div class="col-12 col-md-9" style="width: 300px;padding-top: 15px;padding-left: 30px">
                        <select id="selServer" class="form-control" th:utext="${servers}" onchange="submitForm();">

                        </select>
                    </div>

                </form>
            </div>
        </div>
        <div class="top-right">


        </div>
    </header><!-- /header -->
    <!-- Header-->

    <div class="content" style="margin: auto">
        <div class="animated fadeIn">
            <div class="row" >

                <div class="col-lg-6" style="flex: 0 0 auto;margin-left:150px" >
                    <div class="card" th:utext="${contentString}" id="pageContent">

                    </div>
                    <div class="card" style="width: auto" th:utext="${returnString}" id="returnContent"></div>
                    <div th:utext="${userInfo}">

                    </div>
                </div>
                <div class="col-lg-3" style="flex: 0 0 auto;margin-left:50px" th:utext="${configsName}">
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/webroot/vendors/bundle.js"></script>

<!-- Select2 -->
<script src="/webroot/vendors/select2/js/select2.min.js"></script>
<script src="/webroot/assets/js/examples/select2.js"></script>

<!-- Range slider -->
<script src="/webroot/vendors/range-slider/js/ion.rangeSlider.min.js"></script>
<script src="/webroot/assets/js/examples/range-slider.js"></script>

<!-- Input mask -->
<script src="/webroot/vendors/input-mask/jquery.mask.js"></script>
<script src="/webroot/assets/js/examples/input-mask.js"></script>

<!-- Tagsinput -->
<script src="/webroot/vendors/tagsinput/bootstrap-tagsinput.js"></script>
<script src="/webroot/assets/js/examples/tagsinput.js"></script>

<!-- Prism -->
<script src="/webroot/vendors/prism/prism.js"></script>

<!-- App scripts -->
<script src="/webroot/assets/js/app.min.js"></script>
<!-- Prism -->

<script src="/webroot/assets/js/main.js"></script>
<script src="/webroot/vendors/bundle.js"></script>
<script src="/vendors/clockpicker/bootstrap-clockpicker.min.js"></script>
<script type="text/javascript" src="/webroot/vendors/datepicker/daterangepicker.js"></script>

<script src="/webroot/laydate/laydate.js"></script>
<script>
    lay('#version').html('-v' + laydate.v);

    //执行一个laydate实例
    laydate.render({
        elem: '#TIMESTAMP' //指定元素
        , type: 'datetime'

    });
</script>
<script type="text/javascript" th:inline="javascript">
    var pageName = [[${pagename}]]
    var serverName = [[${servername}]]

    $(function () {
        //侧边栏添加选中状态和展开状态
        $("[href=" + pageName + "]").addClass("active");
        $("[href=" + pageName + "]").parent().parent().parent().addClass("open")
        history.pushState(null, null, "/main/" + serverName + "/" + pageName);

        var route = document.createElement("input");
        route.setAttribute("type", "hidden");
        route.setAttribute("value", "/" + serverName + "/" + pageName);
        route.setAttribute("name", "route");
        if (document.getElementById("selectForm") != null) {
            document.getElementById("selectForm").appendChild(route);
        }

        var route1 = document.createElement("input");
        route1.setAttribute("type", "hidden");
        route1.setAttribute("value", "/" + serverName + "/" + pageName);
        route1.setAttribute("name", "route");
        if (document.getElementById("configNames") != null) {
            document.getElementById("configNames").appendChild(route1);
        }

        //再提交后把输入框的内容变成刚刚查找的配置名
        var selectName = [[${selectName}]]
        console.log("name" + selectName);
        // document.getElementById("configName").value = selectName;

        //关于修改框的操作
        var textroute = document.createElement("input");
        textroute.setAttribute("type", "hidden");
        textroute.setAttribute("value", "/" + serverName + "/" + pageName);
        textroute.setAttribute("name", "route");
        // var configName = document.createElement("input");
        // configName.setAttribute("type", "hidden");
        // configName.setAttribute("value", selectName);
        // configName.setAttribute("name", "args");
        var updateConfigBody = document.createElement("input");
        updateConfigBody.setAttribute("type", "hidden");
        updateConfigBody.setAttribute("value", "updateConfigBody");
        updateConfigBody.setAttribute("name", "operation");
        if (document.getElementById("updateForm") != null) {
            document.getElementById("updateForm").appendChild(textroute);
            //document.getElementById("updateForm").appendChild(configName);
            document.getElementById("updateForm").appendChild(updateConfigBody);
        }
        var argsName = [[${args}]];
        console.log(argsName);
        var subArgsName = argsName["map"];
        console.log(subArgsName);
        $.each(subArgsName, function (key, value) {
            if (document.getElementById(key) !== null) {
                document.getElementById(key).value = value;
            }
            console.log(key);
            console.log(value);
        })
    })

    function logout() {

        document.cookie = "Token=token;Path=/"
        window.location.href = "/login";
    }

    $('#Clock').clockpicker()
        .find('input').change(function () {
    });
    $(document).ready(function () {
        $('#Date').daterangepicker({
            singleDatePicker: true
        })
    })

    function configClick(config) {
        var clickItem = config;
        console.log(clickItem.value());
    }

    function submitForm() {
        var server = $("#selServer").val();
        if (server !== "0") {
            window.location.href = "/main/" + server + "/0"
        }
    }


    function refreshAjaxGet(urls, section) {
        console.log("ajaxget")
        $.ajax({
            type: "GET",
            dataType: "text",
            url: urls,
            data:JSON.stringify({"URLS":urls}),
            success: function (data) {
                // alert(data)
                $("#"+ section).html(data)
            }
        }) 
    }

    function refreshAjaxPost(urls, section) {
        $.ajax({
            type: "POST",
            dataType: "text",
            url: urls,
            data: JSON.stringify({
                
            }),
            success: function (data) {
                // alert(data)
                $("#"+ section).html(data)
            }
        }) 
    }
    function changeAside(urls) {
        console.log("changeAside")
        refreshAjaxGet(urls,"pageContent")
    }
    function changeReturn(urls) {
        refreshAjaxPost(urls,"returnContent")
    }
</script>
<!---->

</body>
</html>
